var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},runtime={},runtime_cjs={},index_cjs$1={},share_cjs={};function getBuilderId(){return"undefined"!=typeof FEDERATION_BUILD_IDENTIFIER?FEDERATION_BUILD_IDENTIFIER:""}function isDebugMode$1(){return Boolean("")}function isBrowserEnv$1(){return"undefined"!=typeof window}const LOG_CATEGORY$1="[ Federation Runtime ]";function assert$1(e,t){e||error$1(t)}function error$1(e){if(e instanceof Error)throw e.message=`${LOG_CATEGORY$1}: ${e.message}`,e;throw new Error(`${LOG_CATEGORY$1}: ${e}`)}function warn$1(e){e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,console.warn(e)):console.warn(`${LOG_CATEGORY$1}: ${e}`)}function addUniqueItem(e,t){return-1===e.findIndex((e=>e===t))&&e.push(t),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return void 0!==e.entry}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function safeToString$1(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}function isObject(e){return e&&"object"==typeof e}const objectToString=Object.prototype.toString;function isPlainObject(e){return"[object Object]"===objectToString.call(e)}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const t={url:"",type:"global",globalName:""};return isBrowserEnv$1()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:t:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||t.url,type:e.ssrRemoteEntryType||t.type,globalName:e.globalName}:t}function _extends$1$1(){return _extends$1$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$1$1.apply(this,arguments)}function _object_without_properties_loose(e,t){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}const nativeGlobal=(()=>{try{return new Function("return this")()}catch(e){return globalThis}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,t,o){Object.defineProperty(e,t,{value:o,configurable:!1,writable:!0})}function includeOwnProperty(e,t){return Object.hasOwnProperty.call(e,t)}includeOwnProperty(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var t,o,n,r,s,a;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__)),null!=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__||(t.__GLOBAL_PLUGIN__=[]),null!=(o=e.__FEDERATION__).__INSTANCES__||(o.__INSTANCES__=[]),null!=(n=e.__FEDERATION__).moduleInfo||(n.moduleInfo={}),null!=(r=e.__FEDERATION__).__SHARE__||(r.__SHARE__={}),null!=(s=e.__FEDERATION__).__MANIFEST_LOADING__||(s.__MANIFEST_LOADING__={}),null!=(a=e.__FEDERATION__).__PRELOADED_MAP__||(a.__PRELOADED_MAP__=new Map)}function resetFederationGlobalInfo(){globalThis.__FEDERATION__.__GLOBAL_PLUGIN__=[],globalThis.__FEDERATION__.__INSTANCES__=[],globalThis.__FEDERATION__.moduleInfo={},globalThis.__FEDERATION__.__SHARE__={},globalThis.__FEDERATION__.__MANIFEST_LOADING__={}}function getGlobalFederationInstance(e,t){const o=getBuilderId();return globalThis.__FEDERATION__.__INSTANCES__.find((n=>!(!o||n.options.id!==getBuilderId())||(n.options.name===e&&!n.options.version&&!t||!(n.options.name!==e||!t||n.options.version!==t))))}function setGlobalFederationInstance(e){globalThis.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,t=isDebugMode$1()){t&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.5.1")}function getInfoWithoutType(e,t){if("string"==typeof t){if(e[t])return{value:e[t],key:t};{const o=Object.keys(e);for(const n of o){const[o,r]=n.split(":"),s=`${o}:${t}`,a=e[s];if(a)return{value:a,key:s}}return{value:void 0,key:t}}}throw new Error("key must be string")}setGlobalDefaultVal(globalThis),setGlobalDefaultVal(nativeGlobal);const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,t)=>{const o=getInfoWithoutType(t,getFMId(e)).value;if(o&&!o.version&&"version"in e&&e.version&&(o.version=e.version),o)return o;if("version"in e&&e.version){const{version:t}=e,o=getFMId(_object_without_properties_loose(e,["version"])),n=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,o).value;if((null==n?void 0:n.version)===t)return n}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,t)=>{const o=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[o]=t,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=_extends$1$1({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const t=Object.keys(e);for(const e of t)delete nativeGlobal.__FEDERATION__.moduleInfo[e]}),getRemoteEntryExports=(e,t)=>{const o=t||`__FEDERATION_${e}:custom__`;return{remoteEntryKey:o,entryExports:globalThis[o]}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:t}=nativeGlobal.__FEDERATION__;e.forEach((e=>{-1===t.findIndex((t=>t.name===e.name))?t.push(e):warn$1(`The plugin ${e.name} has been registered.`)}))},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||"x"===e.toLowerCase()||"*"===e}function pipe(...e){return t=>e.reduce(((e,t)=>t(e)),t)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,t,o,n){const r=`${e}.${t}.${o}`;return n?`${r}-${n}`:r}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),((e,t,o,n,r,s,a,i,l,c,u,d)=>`${t=isXVersion(o)?"":isXVersion(n)?`>=${o}.0.0`:isXVersion(r)?`>=${o}.${n}.0`:`>=${t}`} ${i=isXVersion(l)?"":isXVersion(c)?`<${Number(l)+1}.0.0-0`:isXVersion(u)?`<${l}.${Number(c)+1}.0-0`:d?`<=${l}.${c}.${u}-${d}`:`<=${i}`}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map((e=>e.replace(parseRegex(caret),((e,t,o,n,r)=>isXVersion(t)?"":isXVersion(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?"0"===t?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.0 <${Number(t)+1}.0.0-0`:r?"0"===t?"0"===o?`>=${t}.${o}.${n}-${r} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n}-${r} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n}-${r} <${Number(t)+1}.0.0-0`:"0"===t?"0"===o?`>=${t}.${o}.${n} <${t}.${o}.${Number(n)+1}-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${Number(t)+1}.0.0-0`)))).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map((e=>e.replace(parseRegex(tilde),((e,t,o,n,r)=>isXVersion(t)?"":isXVersion(o)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?`>=${t}.${o}.0 <${t}.${Number(o)+1}.0-0`:r?`>=${t}.${o}.${n}-${r} <${t}.${Number(o)+1}.0-0`:`>=${t}.${o}.${n} <${t}.${Number(o)+1}.0-0`)))).join(" ")}function parseXRanges(e){return e.split(/\s+/).map((e=>e.trim().replace(parseRegex(xRange),((e,t,o,n,r,s)=>{const a=isXVersion(o),i=a||isXVersion(n),l=i||isXVersion(r);return"="===t&&l&&(t=""),s="",a?">"===t||"<"===t?"<0.0.0-0":"*":t&&l?(i&&(n=0),r=0,">"===t?(t=">=",i?(o=Number(o)+1,n=0,r=0):(n=Number(n)+1,r=0)):"<="===t&&(t="<",i?o=Number(o)+1:n=Number(n)+1),"<"===t&&(s="-0"),`${t+o}.${n}.${r}${s}`):i?`>=${o}.0.0${s} <${Number(o)+1}.0.0-0`:l?`>=${o}.${n}.0${s} <${o}.${Number(n)+1}.0-0`:e})))).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,t){return(e=Number(e)||e)>(t=Number(t)||t)?1:e===t?0:-1}function comparePreRelease(e,t){const{preRelease:o}=e,{preRelease:n}=t;if(void 0===o&&Boolean(n))return 1;if(Boolean(o)&&void 0===n)return-1;if(void 0===o&&void 0===n)return 0;for(let e=0,t=o.length;e<=t;e++){const t=o[e],r=n[e];if(t!==r)return void 0===t&&void 0===r?0:t?r?compareAtom(t,r):-1:1}return 0}function compareVersion(e,t){return compareAtom(e.major,t.major)||compareAtom(e.minor,t.minor)||compareAtom(e.patch,t.patch)||comparePreRelease(e,t)}function eq(e,t){return e.version===t.version}function compare(e,t){switch(e.operator){case"":case"=":return eq(e,t);case">":return compareVersion(e,t)<0;case">=":return eq(e,t)||compareVersion(e,t)<0;case"<":return compareVersion(e,t)>0;case"<=":return eq(e,t)||compareVersion(e,t)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,t){if(!e)return!1;const o=parseRange(t).split(" ").map((e=>parseComparatorString(e))).join(" ").split(/\s+/).map((e=>parseGTE0(e))),n=extractComparator(e);if(!n)return!1;const[,r,,s,a,i,l]=n,c={operator:r,version:combineVersion(s,a,i,l),major:s,minor:a,patch:i,preRelease:null==l?void 0:l.split(".")};for(const e of o){const t=extractComparator(e);if(!t)return!1;const[,o,,n,r,s,a]=t;if(!compare({operator:o,version:combineVersion(n,r,s,a),major:n,minor:r,patch:s,preRelease:null==a?void 0:a.split(".")},c))return!1}return!0}function _extends$2(){return _extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$2.apply(this,arguments)}function formatShare(e,t,o){let n;var r,s;return n="get"in e?e.get:"lib"in e?()=>Promise.resolve(e.lib):()=>Promise.resolve((()=>{throw new Error(`Can not get shared '${o}'!`)})),_extends$2({deps:[],useIn:[],from:t,loading:null},e,{shareConfig:_extends$2({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:n,loaded:!(!(null==e?void 0:e.loaded)&&!("lib"in e))||void 0,version:null!=(r=e.version)?r:"0",scope:Array.isArray(e.scope)?e.scope:[null!=(s=e.scope)?s:"default"],strategy:e.strategy||"version-first"})}function formatShareConfigs(e,t){const o=t.shared||{},n=t.name,r=Object.keys(o).reduce(((e,t)=>{const r=arrayOptions(o[t]);return e[t]=e[t]||[],r.forEach((o=>{e[t].push(formatShare(o,n,t))})),e}),{}),s=_extends$2({},e.shared);return Object.keys(r).forEach((e=>{s[e]?r[e].forEach((t=>{s[e].find((e=>e.version===t.version))||s[e].push(t)})):s[e]=r[e]})),{shared:s,shareInfos:r}}function versionLt(e,t){const o=e=>{if(!Number.isNaN(Number(e))){const t=e.split(".");let o=e;for(let e=0;e<3-t.length;e++)o+=".0";return o}return e};return!!satisfy(o(e),`<=${o(t)}`)}const findVersion=(e,t)=>{const o=t||function(e,t){return versionLt(e,t)};return Object.keys(e).reduce(((e,t)=>e?o(e,t)||"0"===e?t:e:t),0)},isLoaded=e=>Boolean(e.loaded)||"function"==typeof e.lib;function findSingletonVersionOrderByVersion(e,t,o){const n=e[t][o];return findVersion(e[t][o],(function(e,t){return!isLoaded(n[e])&&versionLt(e,t)}))}function findSingletonVersionOrderByLoaded(e,t,o){const n=e[t][o];return findVersion(e[t][o],(function(e,t){return isLoaded(n[t])?!isLoaded(n[e])||Boolean(versionLt(e,t)):!isLoaded(n[e])&&versionLt(e,t)}))}function getFindShareFunction(e){return"loaded-first"===e?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,t,o,n){if(!e)return;const{shareConfig:r,scope:s=DEFAULT_SCOPE,strategy:a}=o,i=Array.isArray(s)?s:[s];for(const s of i)if(r&&e[s]&&e[s][t]){const{requiredVersion:i}=r,l=getFindShareFunction(a)(e,s,t),c=()=>{if(r.singleton){if("string"==typeof i&&!satisfy(l,i)){const n=`Version ${l} from ${l&&e[s][t][l].from} of shared singleton module ${t} does not satisfy the requirement of ${o.from} which needs ${i})`;r.strictVersion?error$1(n):warn$1(n)}return e[s][t][l]}if(!1===i||"*"===i)return e[s][t][l];if(satisfy(l,i))return e[s][t][l];for(const[o,n]of Object.entries(e[s][t]))if(satisfy(o,i))return n},u={shareScopeMap:e,scope:s,pkgName:t,version:l,GlobalFederation:Global.__FEDERATION__,resolver:c};return(n.emit(u)||u).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:t,extraOptions:o,shareInfos:n}=e;var r;const s=null!=(r=null==o?void 0:o.resolver)?r:e=>{if(!e)return;const t={};e.forEach((e=>{t[e.version]=e}));const o=findVersion(t,(function(e,o){return!isLoaded(t[e])&&versionLt(e,o)}));return t[o]};return Object.assign({},s(n[t]),null==o?void 0:o.customShareInfo)}share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE,share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE,share_cjs.Global=Global,share_cjs.addGlobalSnapshot=addGlobalSnapshot,share_cjs.addUniqueItem=addUniqueItem,share_cjs.arrayOptions=arrayOptions,share_cjs.assert=assert$1,share_cjs.error=error$1,share_cjs.formatShareConfigs=formatShareConfigs,share_cjs.getBuilderId=getBuilderId,share_cjs.getFMId=getFMId,share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor,share_cjs.getGlobalFederationInstance=getGlobalFederationInstance,share_cjs.getGlobalHostPlugins=getGlobalHostPlugins,share_cjs.getGlobalShareScope=getGlobalShareScope,share_cjs.getGlobalSnapshot=getGlobalSnapshot,share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo,share_cjs.getInfoWithoutType=getInfoWithoutType,share_cjs.getPreloaded=getPreloaded,share_cjs.getRegisteredShare=getRegisteredShare,share_cjs.getRemoteEntryExports=getRemoteEntryExports,share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot,share_cjs.getTargetSharedOptions=getTargetSharedOptions,share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo,share_cjs.globalLoading=globalLoading,share_cjs.isBrowserEnv=isBrowserEnv$1,share_cjs.isObject=isObject,share_cjs.isPlainObject=isPlainObject,share_cjs.isPureRemoteEntry=isPureRemoteEntry,share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry,share_cjs.nativeGlobal=nativeGlobal,share_cjs.registerGlobalPlugins=registerGlobalPlugins,share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo,share_cjs.safeToString=safeToString$1,share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor,share_cjs.setGlobalFederationInstance=setGlobalFederationInstance,share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo,share_cjs.setPreloaded=setPreloaded,share_cjs.warn=warn$1;var index_cjs={};Object.defineProperty(index_cjs,"__esModule",{value:!0});const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation";var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return"undefined"!=typeof window}function isDebugMode(){return"undefined"!=typeof process&&process.env&&process.env.FEDERATION_DEBUG?Boolean(process.env.FEDERATION_DEBUG):"undefined"!=typeof FEDERATION_DEBUG&&Boolean(FEDERATION_DEBUG)}const getProcessEnv=function(){return"undefined"!=typeof process&&process.env?process.env:{}};function safeToString(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}const DEBUG_LOG="[ FEDERATION DEBUG ]";function safeGetLocalStorageItem(){try{if("undefined"!=typeof window&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch(e){return"undefined"!=typeof document}return!1}let Logger=class{info(e,t){if(this.enable){const o=safeToString(t)||"";isBrowserEnv()?console.info(`%c ${this.identifier}: ${e} ${o}`,"color:#3300CC"):console.info("[34m%s",`${this.identifier}: ${e} ${o?`\n${o}`:""}`)}}logOriginalInfo(...e){this.enable&&(isBrowserEnv(),console.info(`%c ${this.identifier}: OriginalInfo`,"color:#3300CC"),console.log(...e))}constructor(e){this.enable=!1,this.identifier=e||DEBUG_LOG,(isBrowserEnv()&&safeGetLocalStorageItem()||isDebugMode())&&(this.enable=!0)}};const LOG_CATEGORY="[ Federation Runtime ]",parseEntry=(e,t,o=SEPARATOR)=>{const n=e.split(o),r="development"===getProcessEnv().NODE_ENV&&t,s=e=>e.startsWith("http")||e.includes(MANIFEST_EXT);if(n.length>=2){let[t,...a]=n;e.startsWith(o)&&(a=[r||n.slice(-1)[0]],t=n.slice(0,-1).join(o));let i=r||a.join(o);return s(i)?{name:t,entry:i}:{name:t,version:i||"*"}}if(1===n.length){const[e]=n;return r&&s(r)?{name:e,entry:r}:{name:e,version:r||"*"}}throw`Invalid entry value: ${e}`},logger=new Logger,composeKeyWithSeparator=function(...e){return e.length?e.reduce(((e,t)=>t?e?`${e}${SEPARATOR}${t}`:t:e),""):""},encodeName=function(e,t="",o=!1){try{const n=o?".js":"";return`${t}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${n}`}catch(e){throw e}},decodeName=function(e,t,o){try{let n=e;if(t){if(!n.startsWith(t))return n;n=n.replace(new RegExp(t,"g"),"")}return n=n.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),o&&(n=n.replace(".js","")),n}catch(e){throw e}},generateExposeFilename=(e,t)=>{if(!e)return"";let o=e;return"."===o&&(o="default_export"),o.startsWith("./")&&(o=o.replace("./","")),encodeName(o,"__federation_expose_",t)},generateShareFilename=(e,t)=>e?encodeName(e,"__federation_shared_",t):"",getResourceUrl=(e,t)=>{if("getPublicPath"in e){let o;return o=e.getPublicPath.startsWith("function")?new Function("return "+e.getPublicPath)()():new Function(e.getPublicPath)(),`${o}${t}`}return"publicPath"in e?`${e.publicPath}${t}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,t),"")},assert=(e,t)=>{e||error(t)},error=e=>{throw new Error(`${LOG_CATEGORY}: ${e}`)},warn=e=>{console.warn(`${LOG_CATEGORY}: ${e}`)};function _extends$1(){return _extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends$1.apply(this,arguments)}const simpleJoinRemoteEntry=(e,t)=>{if(!e)return t;const o=(e=>{if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){const t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e})(e);return o?o.endsWith("/")?`${o}${t}`:`${o}/${t}`:t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,t={}){var o,n;const{remotes:r={},overrides:s={},version:a}=t;let i;const l=()=>"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&a?inferAutoPublicPath(a):e.metaData.publicPath:e.metaData.getPublicPath,c=Object.keys(s);let u={};var d;Object.keys(r).length||(u=(null==(d=e.remotes)?void 0:d.reduce(((e,t)=>{let o;const n=t.federationContainerName;return o=c.includes(n)?s[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:o},e}),{}))||{});Object.keys(r).forEach((e=>u[e]={matchedVersion:c.includes(e)?s[e]:r[e]}));const{remoteEntry:{path:m,name:h,type:f},types:p,buildInfo:{buildVersion:_},globalName:g,ssrRemoteEntry:y}=e.metaData,{exposes:b}=e;let E={version:a||"",buildVersion:_,globalName:g,remoteEntry:simpleJoinRemoteEntry(m,h),remoteEntryType:f,remoteTypes:simpleJoinRemoteEntry(p.path,p.name),remoteTypesZip:p.zip||"",remoteTypesAPI:p.api||"",remotesInfo:u,shared:null==e?void 0:e.shared.map((e=>({assets:e.assets,sharedName:e.name,version:e.version}))),modules:null==b?void 0:b.map((e=>({moduleName:e.name,modulePath:e.path,assets:e.assets})))};if(null==(o=e.metaData)?void 0:o.prefetchInterface){E=_extends$1({},E,{prefetchInterface:e.metaData.prefetchInterface})}if(null==(n=e.metaData)?void 0:n.prefetchEntry){const{path:t,name:o,type:n}=e.metaData.prefetchEntry;E=_extends$1({},E,{prefetchEntry:simpleJoinRemoteEntry(t,o),prefetchEntryType:n})}if(i="publicPath"in e.metaData?_extends$1({},E,{publicPath:l()}):_extends$1({},E,{getPublicPath:l()}),y){const e=simpleJoinRemoteEntry(y.path,y.name);i.ssrRemoteEntry=e,i.ssrRemoteEntryType="commonjs-module"}return i}function isManifestProvider(e){return!(!("remoteEntry"in e)||!e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,t){try{return await e()}catch(e){return void(!t&&warn(e))}}function isStaticResourcesEqual(e,t){const o=/^(https?:)?\/\//i;return e.replace(o,"").replace(/\/$/,"")===t.replace(o,"").replace(/\/$/,"")}function createScript(e){let t,o=null,n=!0,r=2e4;const s=document.getElementsByTagName("script");for(let t=0;t<s.length;t++){const r=s[t],a=r.getAttribute("src");if(a&&isStaticResourcesEqual(a,e.url)){o=r,n=!1;break}}if(!o){let t;o=document.createElement("script"),o.type="text/javascript",o.src=e.url,e.createScriptHook&&(t=e.createScriptHook(e.url,e.attrs),t instanceof HTMLScriptElement?o=t:"object"==typeof t&&("script"in t&&t.script&&(o=t.script),"timeout"in t&&t.timeout&&(r=t.timeout)));const n=e.attrs;n&&!t&&Object.keys(n).forEach((e=>{o&&("async"===e||"defer"===e?o[e]=n[e]:o.getAttribute(e)||o.setAttribute(e,n[e]))}))}const a=(n,r)=>{var s;if(clearTimeout(t),o&&(o.onerror=null,o.onload=null,safeWrapper((()=>{const{needDeleteScript:t=!0}=e;t&&(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o)})),n)){var a;const t=n(r);return null==e||null==(a=e.cb)||a.call(e),t}null==e||null==(s=e.cb)||s.call(e)};return o.onerror=a.bind(null,o.onerror),o.onload=a.bind(null,o.onload),t=setTimeout((()=>{a(null,new Error(`Remote script "${e.url}" time-outed.`))}),r),{script:o,needAttach:n}}function createLink(e){let t=null,o=!0;const n=document.getElementsByTagName("link");for(let r=0;r<n.length;r++){const s=n[r],a=s.getAttribute("href"),i=s.getAttribute("ref");if(a&&isStaticResourcesEqual(a,e.url)&&i===e.attrs.ref){t=s,o=!1;break}}if(!t){let o;t=document.createElement("link"),t.setAttribute("href",e.url);const n=e.attrs;e.createLinkHook&&(o=e.createLinkHook(e.url,n),o instanceof HTMLLinkElement&&(t=o)),n&&!o&&Object.keys(n).forEach((e=>{t&&!t.getAttribute(e)&&t.setAttribute(e,n[e])}))}const r=(o,n)=>{if(t&&(t.onerror=null,t.onload=null,safeWrapper((()=>{const{needDeleteLink:o=!0}=e;o&&(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)})),o)){const t=o(n);return e.cb(),t}e.cb()};return t.onerror=r.bind(null,t.onerror),t.onload=r.bind(null,t.onload),{link:t,needAttach:o}}function loadScript(e,t){const{attrs:o={},createScriptHook:n}=t;return new Promise(((t,r)=>{const{script:s,needAttach:a}=createScript({url:e,cb:t,attrs:_extends$1({fetchpriority:"high"},o),createScriptHook:n,needDeleteScript:!0});a&&document.head.appendChild(s)}))}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then((e=>e)).catch((t=>{throw console.error(`Error importing module ${e}:`,t),t}))}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,t)=>{const o=__webpack_require__.federation.instance.loaderHook,n=await((e,t)=>o.lifecycle.fetch.emit(e,t))(e,t||{});if(!(n&&n instanceof Response)){return("undefined"==typeof fetch?await loadNodeFetch():fetch)(e,t||{})}return n};function createScriptNode(url,cb,attrs,createScriptHook){if(createScriptHook){const e=createScriptHook(url);e&&"object"==typeof e&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){return console.error("Error constructing URL:",e),void cb(new Error(`Invalid URL: ${e}`))}const getFetch=async()=>{if("undefined"!=typeof __webpack_require__)try{if(__webpack_require__.federation.instance.loaderHook.lifecycle.fetch)return lazyLoaderHookFetch}catch(e){console.warn("federation.instance.loaderHook.lifecycle.fetch failed:",e)}return"undefined"==typeof fetch?loadNodeFetch():fetch},handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}\n})`,{filename,importModuleDynamically:null!=(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=null==(_vm_constants=vm.constants)?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;return void cb(void 0,e)}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then((e=>handleScriptFetch(e,urlObj))).catch((e=>{cb(e)}))}function loadScriptNode(e,t){return new Promise(((o,n)=>{createScriptNode(e,((e,r)=>{if(e)n(e);else{var s,a;const e=(null==t||null==(s=t.attrs)?void 0:s.globalName)||`__FEDERATION_${null==t||null==(a=t.attrs)?void 0:a.name}:custom__`,n=globalThis[e]=r;o(n)}}),t.attrs,t.createScriptHook)}))}function normalizeOptions(e,t,o){return function(n){if(!1===n)return!1;if(void 0===n)return!!e&&t;if(!0===n)return t;if(n&&"object"==typeof n)return _extends$1({},t,n);throw new Error(`Unexpected type for \`${o}\`, expect boolean/undefined/object, got: ${typeof n}`)}}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}index_cjs.BROWSER_LOG_KEY=BROWSER_LOG_KEY,index_cjs.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE,index_cjs.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX,index_cjs.EncodedNameTransformMap=EncodedNameTransformMap,index_cjs.FederationModuleManifest=FederationModuleManifest,index_cjs.Logger=Logger,index_cjs.MANIFEST_EXT=MANIFEST_EXT,index_cjs.MFModuleType=MFModuleType,index_cjs.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER,index_cjs.ManifestFileName=ManifestFileName,index_cjs.NameTransformMap=NameTransformMap,index_cjs.NameTransformSymbol=NameTransformSymbol,index_cjs.SEPARATOR=SEPARATOR,index_cjs.StatsFileName=StatsFileName,index_cjs.TEMP_DIR=TEMP_DIR,index_cjs.assert=assert,index_cjs.composeKeyWithSeparator=composeKeyWithSeparator,index_cjs.containerPlugin=ContainerPlugin,index_cjs.containerReferencePlugin=ContainerReferencePlugin,index_cjs.createLink=createLink,index_cjs.createScript=createScript,index_cjs.createScriptNode=createScriptNode,index_cjs.decodeName=decodeName,index_cjs.encodeName=encodeName,index_cjs.error=error,index_cjs.generateExposeFilename=generateExposeFilename,index_cjs.generateShareFilename=generateShareFilename,index_cjs.generateSnapshotFromManifest=generateSnapshotFromManifest,index_cjs.getProcessEnv=getProcessEnv,index_cjs.getResourceUrl=getResourceUrl,index_cjs.inferAutoPublicPath=inferAutoPublicPath,index_cjs.isBrowserEnv=isBrowserEnv,index_cjs.isDebugMode=isDebugMode,index_cjs.isManifestProvider=isManifestProvider,index_cjs.isStaticResourcesEqual=isStaticResourcesEqual,index_cjs.loadScript=loadScript,index_cjs.loadScriptNode=loadScriptNode,index_cjs.logger=logger,index_cjs.moduleFederationPlugin=ModuleFederationPlugin,index_cjs.normalizeOptions=normalizeOptions,index_cjs.parseEntry=parseEntry,index_cjs.safeWrapper=safeWrapper,index_cjs.sharePlugin=SharePlugin,index_cjs.simpleJoinRemoteEntry=simpleJoinRemoteEntry,index_cjs.warn=warn,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=share_cjs,o=index_cjs;function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}async function r({remoteInfo:e,remoteEntryExports:n,createScriptHook:r}){const{entry:s,entryGlobalName:a,name:i,type:l}=e;switch(l){case"esm":case"module":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):new Function("callbacks",`import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n])}catch(e){n(e)}}))}({entry:s,remoteEntryExports:n});case"system":return async function({entry:e,remoteEntryExports:t}){return new Promise(((o,n)=>{try{t?o(t):new Function("callbacks",`System.import("${e}").then(callbacks[0]).catch(callbacks[1])`)([o,n])}catch(e){n(e)}}))}({entry:s,remoteEntryExports:n});default:return async function({name:e,globalName:n,entry:r,createScriptHook:s}){const{entryExports:a}=t.getRemoteEntryExports(e,n);return a||o.loadScript(r,{attrs:{},createScriptHook:(e,t)=>{const o=s.emit({url:e,attrs:t});if(o)return o instanceof HTMLScriptElement||"script"in o||"timeout"in o?o:void 0}}).then((()=>{const{remoteEntryKey:o,entryExports:s}=t.getRemoteEntryExports(e,n);return t.assert(s,`\n      Unable to use the ${e}'s '${r}' URL with ${o}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${o} cannot be used to get remoteEntry exports in the window object.\n    `),s})).catch((e=>{throw e}))}({entry:s,globalName:a,name:i,createScriptHook:r})}}function s(e){const{entry:t,name:n}=e;return o.composeKeyWithSeparator(n,t)}async function a({origin:e,remoteEntryExports:n,remoteInfo:a}){const i=s(a);if(n)return n;if(!t.globalLoading[i]){const s=e.remoteHandler.hooks.lifecycle.loadEntry;if(s.listeners.size)t.globalLoading[i]=s.emit({createScriptHook:e.loaderHook.lifecycle.createScript,remoteInfo:a,remoteEntryExports:n}).then((e=>e||void 0));else{const s=e.loaderHook.lifecycle.createScript;o.isBrowserEnv()?t.globalLoading[i]=r({remoteInfo:a,remoteEntryExports:n,createScriptHook:s}):t.globalLoading[i]=async function({remoteInfo:e,createScriptHook:n}){const{entry:r,entryGlobalName:s,name:a}=e,{entryExports:i}=t.getRemoteEntryExports(a,s);return i||o.loadScriptNode(r,{attrs:{name:a,globalName:s},createScriptHook:(e,t)=>{const o=n.emit({url:e,attrs:t});if(o)return"url"in o?o:void 0}}).then((()=>{const{remoteEntryKey:e,entryExports:o}=t.getRemoteEntryExports(a,s);return t.assert(o,`\n      Unable to use the ${a}'s '${r}' URL with ${e}'s globalName to get remoteEntry exports.\n      Possible reasons could be:\n\n      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.\n\n      2. ${e} cannot be used to get remoteEntry exports in the window object.\n    `),o})).catch((e=>{throw e}))}({remoteInfo:a,createScriptHook:s})}}return t.globalLoading[i]}function i(e){return n({},e,{entry:"entry"in e?e.entry:"",type:e.type||t.DEFAULT_REMOTE_TYPE,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||t.DEFAULT_SCOPE})}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l.apply(this,arguments)}let c=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;const e=await a({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports});return t.assert(e,`remoteEntryExports is undefined \n ${t.safeToString(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,o,n){const{loadFactory:r=!0}=n||{loadFactory:!0},s=await this.getEntry();if(!this.inited){const e=this.host.shareScopeMap,t=this.remoteInfo.shareScope||"default";e[t]||(e[t]={});const o=e[t],n=[],r={version:this.remoteInfo.version||""};Object.defineProperty(r,"shareScopeMap",{value:e,enumerable:!1});const a=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:o,remoteEntryInitOptions:r,initScope:n,remoteInfo:this.remoteInfo,origin:this.host});void 0===(null==s?void 0:s.init)&&console.error('The remote entry interface does not contain "init"',"\n","Ensure the name of this remote is not reserved or in use. Check if anything already exists on window[nameOfRemote]","\n","Ensure that window[nameOfRemote] is returning a {get,init} object."),await s.init(a.shareScope,a.initScope,a.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(l({},a,{remoteEntryExports:s}))}this.lib=s,this.inited=!0;const a=await s.get(o);t.assert(a,`${t.getFMId(this.remoteInfo)} remote don't export ${o}.`);const i=this.wraperFactory(a,e);if(!r)return i;return await i()}wraperFactory(e,t){function o(e,t){e&&"object"==typeof e&&Object.isExtensible(e)&&!Object.getOwnPropertyDescriptor(e,Symbol.for("mf_module_id"))&&Object.defineProperty(e,Symbol.for("mf_module_id"),{value:t,enumerable:!1})}return e instanceof Promise?async()=>{const n=await e();return o(n,t),n}:()=>{const n=e();return o(n,t),n}}constructor({remoteInfo:e,host:t}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=t}};class u{on(e){"function"==typeof e&&this.listeners.add(e)}once(e){const t=this;this.on((function o(...n){return t.remove(o),e.apply(null,n)}))}emit(...e){let t;return this.listeners.size>0&&this.listeners.forEach((o=>{t=o(...e)})),t}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class d extends u{emit(...e){let t;const o=Array.from(this.listeners);if(o.length>0){let n=0;const r=t=>!1!==t&&(n<o.length?Promise.resolve(o[n++].apply(null,e)).then(r):t);t=r()}return Promise.resolve(t)}}function m(e,o){if(!t.isObject(o))return!1;if(e!==o)for(const t in e)if(!(t in o))return!1;return!0}class h extends u{emit(e){t.isObject(e)||t.error(`The data for the "${this.type}" hook should be an object.`);for(const o of this.listeners)try{const t=o(e);if(!m(e,t)){this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}e=t}catch(e){t.warn(e),this.onerror(e)}return e}constructor(e){super(),this.onerror=t.error,this.type=e}}class f extends u{emit(e){t.isObject(e)||t.error(`The response data for the "${this.type}" hook must be an object.`);const o=Array.from(this.listeners);if(o.length>0){let n=0;const r=o=>(t.warn(o),this.onerror(o),e),s=t=>{if(m(e,t)){if(e=t,n<o.length)try{return Promise.resolve(o[n++](e)).then(s,r)}catch(e){return r(e)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(s(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=t.error,this.type=e}}class p{applyPlugin(e){t.assert(t.isPlainObject(e),"Plugin configuration is invalid.");const o=e.name;t.assert(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=e,Object.keys(this.lifecycle).forEach((t=>{const o=e[t];o&&this.lifecycle[t].on(o)})))}removePlugin(e){t.assert(e,"A name is required.");const o=this.registerPlugins[e];t.assert(o,`The plugin "${e}" is not registered.`),Object.keys(o).forEach((e=>{"name"!==e&&this.lifecycle[e].remove(o[e])}))}inherit({lifecycle:e,registerPlugins:o}){Object.keys(e).forEach((o=>{t.assert(!this.lifecycle[o],`The hook "${o}" has a conflict and cannot be inherited.`),this.lifecycle[o]=e[o]})),Object.keys(o).forEach((e=>{t.assert(!this.registerPlugins[e],`The plugin "${e}" has a conflict and cannot be inherited.`),this.applyPlugin(o[e])}))}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_.apply(this,arguments)}function g(e){return _({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function y(e,t,n,r=!0){const{cssAssets:s,jsAssetsWithoutEntry:i,entryAssets:l}=n;if(t.options.inBrowser){if(l.forEach((o=>{const{moduleInfo:n}=o,r=t.moduleCache.get(e.name);a(r?{origin:t,remoteInfo:n,remoteEntryExports:r.remoteEntryExports}:{origin:t,remoteInfo:n,remoteEntryExports:void 0})})),r){const e={rel:"preload",as:"style",crossorigin:"anonymous"};s.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});s&&document.head.appendChild(r)}))}else{const e={rel:"stylesheet",type:"text/css"};s.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n},needDeleteLink:!1});s&&document.head.appendChild(r)}))}if(r){const e={rel:"preload",as:"script",crossorigin:"anonymous"};i.forEach((n=>{const{link:r,needAttach:s}=o.createLink({url:n,cb:()=>{},attrs:e,createLinkHook:(e,o)=>{const n=t.loaderHook.lifecycle.createLink.emit({url:e,attrs:o});if(n instanceof HTMLLinkElement)return n}});s&&document.head.appendChild(r)}))}else{const n={fetchpriority:"high",type:"module"===(null==e?void 0:e.type)?"module":"text/javascript"};i.forEach((e=>{const{script:r,needAttach:s}=o.createScript({url:e,cb:()=>{},attrs:n,createScriptHook:(e,o)=>{const n=t.loaderHook.lifecycle.createScript.emit({url:e,attrs:o});if(n instanceof HTMLScriptElement)return n},needDeleteScript:!0});s&&document.head.appendChild(r)}))}}}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},b.apply(this,arguments)}function E(e,n){const r=t.getRemoteEntryInfoFromSnapshot(n);r.url||t.error(`The attribute remoteEntry of ${e.name} must not be undefined.`);let s=o.getResourceUrl(n,r.url);t.isBrowserEnv()||s.startsWith("http")||(s=`https:${s}`),e.type=r.type,e.entryGlobalName=r.globalName,e.entry=s,e.version=n.version,e.buildVersion=n.buildVersion}function S(e){const t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function I(e,n,r,s,a={},i){const l=t.getFMId(n),{value:c}=t.getInfoWithoutType(e,l),u=i||c;if(u&&!o.isManifestProvider(u)&&(r(u,n,s),u.remotesInfo)){const t=Object.keys(u.remotesInfo);for(const o of t){if(a[o])continue;a[o]=!0;const t=S(o),n=u.remotesInfo[o];I(e,{name:t.name,version:n.matchedVersion},r,!1,a,void 0)}}}function R(e,n,r,s,a){const i=[],l=[],c=[],u=new Set,d=new Set,{options:m}=e,{preloadConfig:h}=n,{depsRemote:f}=h;if(I(s,r,((n,r,s)=>{let a;if(s)a=h;else if(Array.isArray(f)){const e=f.find((e=>e.nameOrAlias===r.name||e.nameOrAlias===r.alias));if(!e)return;a=g(e)}else{if(!0!==f)return;a=h}const u=o.getResourceUrl(n,t.getRemoteEntryInfoFromSnapshot(n).url);u&&c.push({name:r.name,moduleInfo:{name:r.name,entry:u,type:"remoteEntryType"in n?n.remoteEntryType:"global",entryGlobalName:"globalName"in n?n.globalName:r.name,shareScope:"",version:"version"in n?n.version:void 0},url:u});let d="modules"in n?n.modules:[];const m=(p=a.exposes)?p.map((e=>"."===e?e:e.startsWith("./")?e.replace("./",""):e)):[];var p,_;m.length&&"modules"in n&&(d=null==n||null==(_=n.modules)?void 0:_.reduce(((e,t)=>(-1!==(null==m?void 0:m.indexOf(t.moduleName))&&e.push(t),e)),[]));function y(e){const t=e.map((e=>o.getResourceUrl(n,e)));return a.filter?t.filter(a.filter):t}if(d){const o=d.length;for(let s=0;s<o;s++){const o=d[s],c=`${r.name}/${o.moduleName}`;e.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:"."===o.moduleName?r.name:c,name:r.name,remoteSnapshot:n,preloadConfig:a,remote:r,origin:e});t.getPreloaded(c)||("all"===a.resourceCategory?(i.push(...y(o.assets.css.async)),i.push(...y(o.assets.css.sync)),l.push(...y(o.assets.js.async)),l.push(...y(o.assets.js.sync))):(a.resourceCategory="sync")&&(i.push(...y(o.assets.css.sync)),l.push(...y(o.assets.js.sync))),t.setPreloaded(c))}}}),!0,{},a),a.shared){const o=(o,n)=>{const r=t.getRegisteredShare(e.shareScopeMap,n.sharedName,o,e.sharedHandler.hooks.lifecycle.resolveShare);r&&"function"==typeof r.lib&&(n.assets.js.sync.forEach((e=>{u.add(e)})),n.assets.css.sync.forEach((e=>{d.add(e)})))};a.shared.forEach((e=>{var n;const r=null==(n=m.shared)?void 0:n[e.sharedName];if(!r)return;const s=e.version?r.find((t=>t.version===e.version)):r;if(!s)return;t.arrayOptions(s).forEach((t=>{o(t,e)}))}))}const p=l.filter((e=>!u.has(e)));return{cssAssets:i.filter((e=>!d.has(e))),jsAssetsWithoutEntry:p,entryAssets:c}}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},O.apply(this,arguments)}function T(e,o){const n=t.getGlobalSnapshotInfoByModuleInfo({name:o.options.name,version:o.options.version}),r=n&&"remotesInfo"in n&&n.remotesInfo&&t.getInfoWithoutType(n.remotesInfo,e.name).value;return r&&r.matchedVersion?{hostGlobalSnapshot:n,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:e.name,version:r.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:e.name,version:"version"in e?e.version:void 0})}}class ${async loadSnapshot(e){const{options:t}=this.HostInstance,{hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:r}=this.getGlobalRemoteInfo(e),{remoteSnapshot:s,globalSnapshot:a}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:o,remoteSnapshot:n,globalSnapshot:r});return{remoteSnapshot:s,globalSnapshot:a}}async loadRemoteSnapshotInfo(e){const{options:n}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:e});let r=t.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});r||(r={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},t.addGlobalSnapshot({[this.HostInstance.options.name]:r})),r&&"remotesInfo"in r&&!t.getInfoWithoutType(r.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(r.remotesInfo=O({},null==r?void 0:r.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:s,remoteSnapshot:a,globalSnapshot:i}=this.getGlobalRemoteInfo(e),{remoteSnapshot:l,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:s,remoteSnapshot:a,globalSnapshot:i});if(l){if(o.isManifestProvider(l)){const o=t.isBrowserEnv()?l.remoteEntry:l.ssrRemoteEntry||l.remoteEntry||"",n=await this.getManifestJson(o,e,{});return{remoteSnapshot:n,globalSnapshot:t.setGlobalSnapshotInfoByModuleInfo(O({},e,{entry:o}),n)}}{const{remoteSnapshot:t}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:l,from:"global"});return{remoteSnapshot:t,globalSnapshot:c}}}if(t.isRemoteInfoWithEntry(e)){const o=await this.getManifestJson(e.entry,e,{}),n=t.setGlobalSnapshotInfoByModuleInfo(e,o),{remoteSnapshot:r}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:o,from:"global"});return{remoteSnapshot:r,globalSnapshot:n}}t.error(`\n          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:\n\n          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.\n\n          2. The remote '${e.name}' version '${e.version}' is not released.\n\n          The transformed module info: ${JSON.stringify(c)}\n        `)}getGlobalRemoteInfo(e){return T(e,this.HostInstance)}async getManifestJson(e,n,r){const s=async()=>{let o=this.manifestCache.get(e);if(o)return o;try{let n=await this.loaderHook.lifecycle.fetch.emit(e,{});return n&&n instanceof Response||(n=await fetch(e,{})),o=await n.json(),t.assert(o.metaData&&o.exposes&&o.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,o),o}catch(o){delete this.manifestLoading[e],t.error(`Failed to get manifestJson for ${n.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.\n          \n Error message:\n          \n ${o}`)}},a=async()=>{const t=await s(),r=o.generateSnapshotFromManifest(t,{version:e}),{remoteSnapshot:a}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:n,manifestJson:t,remoteSnapshot:r,manifestUrl:e,from:"manifest"});return a};return this.manifestLoading[e]||(this.manifestLoading[e]=a().then((e=>e))),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new p({beforeLoadRemoteSnapshot:new d("beforeLoadRemoteSnapshot"),loadSnapshot:new f("loadGlobalSnapshot"),loadRemoteSnapshot:new f("loadRemoteSnapshot")}),this.manifestLoading=t.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},v.apply(this,arguments)}class N{registerShared(e,o){const{shareInfos:n,shared:r}=t.formatShareConfigs(e,o);return Object.keys(n).forEach((e=>{n[e].forEach((n=>{!t.getRegisteredShare(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare)&&n&&n.lib&&this.setShared({pkgName:e,lib:n.lib,get:n.get,loaded:!0,shared:n,from:o.name})}))})),{shareInfos:n,shared:r}}async loadShare(e,o){const{host:n}=this,r=t.getTargetSharedOptions({pkgName:e,extraOptions:o,shareInfos:n.options.shared});(null==r?void 0:r.scope)&&await Promise.all(r.scope.map((async e=>{await Promise.all(this.initializeSharing(e,r.strategy))})));const s=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:r,shared:n.options.shared,origin:n}),{shareInfo:a}=s;t.assert(a,`Cannot find ${e} Share in the ${n.options.name}. Please ensure that the ${e} Share parameters have been injected`);const i=t.getRegisteredShare(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare),l=e=>{e.useIn||(e.useIn=[]),t.addUniqueItem(e.useIn,n.options.name)};if(i&&i.lib)return l(i),i.lib;if(i&&i.loading&&!i.loaded){const e=await i.loading;return i.loaded=!0,i.lib||(i.lib=e),l(i),e}if(i){const o=(async()=>{const o=await i.get();a.lib=o,a.loaded=!0,l(a);const n=t.getRegisteredShare(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return n&&(n.lib=o,n.loaded=!0),o})();return this.setShared({pkgName:e,loaded:!1,shared:i,from:n.options.name,lib:null,loading:o}),o}{if(null==o?void 0:o.customShareInfo)return!1;const r=(async()=>{const o=await a.get();a.lib=o,a.loaded=!0,l(a);const n=t.getRegisteredShare(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return n&&(n.lib=o,n.loaded=!0),o})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:n.options.name,lib:null,loading:r}),r}}initializeSharing(e=t.DEFAULT_SCOPE,o){const{host:n}=this,r=this.shareScopeMap,s=n.options.name;r[e]||(r[e]={});const a=r[e],i=[],l=async t=>{const{module:o}=await n.remoteHandler.getRemoteModuleAndOptions({id:t});if(o.getEntry){const t=await o.getEntry();o.inited||((s=t)&&s.init&&s.init(r[e]),o.inited=!0)}var s};return Object.keys(n.options.shared).forEach((t=>{n.options.shared[t].forEach((o=>{o.scope.includes(e)&&((e,t)=>{var o;const{version:n,eager:r}=t;a[e]=a[e]||{};const i=a[e],l=i[n],c=Boolean(l&&(l.eager||(null==(o=l.shareConfig)?void 0:o.eager)));(!l||"loaded-first"!==l.strategy&&!l.loaded&&(Boolean(!r)!==!c?r:s>l.from))&&(i[n]=t)})(t,o)}))})),"version-first"===o&&n.options.remotes.forEach((t=>{t.shareScope===e&&i.push(l(t.name))})),i}loadShareSync(e,o){const{host:n}=this,r=t.getTargetSharedOptions({pkgName:e,extraOptions:o,shareInfos:n.options.shared});(null==r?void 0:r.scope)&&r.scope.forEach((e=>{this.initializeSharing(e,r.strategy)}));const s=t.getRegisteredShare(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare),a=e=>{e.useIn||(e.useIn=[]),t.addUniqueItem(e.useIn,n.options.name)};if(s){if("function"==typeof s.lib)return a(s),s.loaded||(s.loaded=!0,s.from===n.options.name&&(r.loaded=!0)),s.lib;if("function"==typeof s.get){const t=s.get();if(!(t instanceof Promise))return a(s),this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:t,shared:s}),t}}if(r.lib)return r.loaded||(r.loaded=!0),r.lib;if(r.get){const t=r.get();if(t instanceof Promise)throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `);return r.lib=t,this.setShared({pkgName:e,loaded:!0,from:n.options.name,lib:r.lib,shared:r}),r.lib}throw new Error(`\n        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${n.options.name}.\n        Possible reasons for failure: \n\n        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.\n\n        2. The ${e} share was not registered with the 'lib' attribute.\n\n      `)}initShareScopeMap(e,t,o={}){const{host:n}=this;this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:n.options,origin:n,scopeName:e,hostShareScopeMap:o.hostShareScopeMap})}setShared({pkgName:e,shared:t,from:o,lib:n,loading:r,loaded:s,get:a}){const{version:i,scope:l="default"}=t,c=function(e,t){if(null==e)return{};var o,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)o=s[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(t,["version","scope"]);(Array.isArray(l)?l:[l]).forEach((t=>{this.shareScopeMap[t]||(this.shareScopeMap[t]={}),this.shareScopeMap[t][e]||(this.shareScopeMap[t][e]={}),this.shareScopeMap[t][e][i]||(this.shareScopeMap[t][e][i]=v({version:i,scope:["default"]},c,{lib:n,loaded:s,loading:r}),a&&(this.shareScopeMap[t][e][i].get=a))}))}_setGlobalShareScopeMap(e){const o=t.getGlobalShareScope(),n=e.id||e.name;n&&!o[n]&&(o[n]=this.shareScopeMap)}constructor(e){this.hooks=new p({afterResolve:new f("afterResolve"),beforeLoadShare:new f("beforeLoadShare"),loadShare:new d,resolveShare:new h("resolveShare"),initContainerShareScopeMap:new h("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this._setGlobalShareScopeMap(e.options)}}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},w.apply(this,arguments)}class j{formatAndRegisterRemote(e,t){return(t.remotes||[]).reduce(((e,t)=>(this.registerRemote(t,e,{force:!1}),e)),e.remotes)}setIdToRemoteMap(e,t){const{remote:o,expose:n}=t,{name:r,alias:s}=o;if(this.idToRemoteMap[e]={name:o.name,expose:n},s&&e.startsWith(r)){const t=e.replace(r,s);this.idToRemoteMap[t]={name:o.name,expose:n}}else if(s&&e.startsWith(s)){const t=e.replace(s,r);this.idToRemoteMap[t]={name:o.name,expose:n}}}async loadRemote(e,t){const{host:o}=this;try{const{loadFactory:n=!0}=t||{loadFactory:!0},{module:r,moduleOptions:s,remoteMatchInfo:a}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:i,remote:l,expose:c,id:u}=a,d=await r.get(u,c,t),m=await this.hooks.lifecycle.onLoad.emit({id:u,pkgNameOrAlias:i,expose:c,exposeModule:n?d:void 0,exposeModuleFactory:n?void 0:d,remote:l,options:s,moduleInstance:r,origin:o});return this.setIdToRemoteMap(e,a),"function"==typeof m?m:d}catch(n){const{from:r="runtime"}=t||{from:"runtime"},s=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:n,from:r,lifecycle:"onLoad",origin:o});if(!s)throw n;return s}}async preloadRemote(e){const{host:o}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:o.options,origin:o});const n=(r=o.options.remotes,e.map((e=>{const o=function(e,t){for(const o of e){if(t===o.name)return o;if(o.alias&&t===o.alias)return o}}(r,e.nameOrAlias);return t.assert(o,`Unable to preload ${e.nameOrAlias} as it is not included in ${!o&&t.safeToString({remoteInfo:o,remotes:r})}`),{remote:o,preloadConfig:g(e)}})));var r;await Promise.all(n.map((async e=>{const{remote:t}=e,n=i(t),{globalSnapshot:r,remoteSnapshot:s}=await o.snapshotHandler.loadRemoteSnapshotInfo(t),a=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:e,remote:t,remoteInfo:n,globalSnapshot:r,remoteSnapshot:s});a&&y(n,o,a)})))}registerRemotes(e,t){const{host:o}=this;e.forEach((e=>{this.registerRemote(e,o.options.remotes,{force:null==t?void 0:t.force})}))}async getRemoteModuleAndOptions(e){const{host:o}=this,{id:n}=e;let r;try{r=await this.hooks.lifecycle.beforeRequest.emit({id:n,options:o.options,origin:o})}catch(e){if(r=await this.hooks.lifecycle.errorLoadRemote.emit({id:n,options:o.options,origin:o,from:"runtime",error:e,lifecycle:"beforeRequest"}),!r)throw e}const{id:s}=r,a=function(e,t){for(const o of e){const e=t.startsWith(o.name);let n=t.replace(o.name,"");if(e){if(n.startsWith("/"))return n=`.${n}`,{pkgNameOrAlias:o.name,expose:n,remote:o};if(""===n)return{pkgNameOrAlias:o.name,expose:".",remote:o}}const r=o.alias&&t.startsWith(o.alias);let s=o.alias&&t.replace(o.alias,"");if(o.alias&&r){if(s&&s.startsWith("/"))return s=`.${s}`,{pkgNameOrAlias:o.alias,expose:s,remote:o};if(""===s)return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}(o.options.remotes,s);t.assert(a,`\n        Unable to locate ${s} in ${o.options.name}. Potential reasons for failure include:\n\n        1. ${s} was not included in the 'remotes' parameter of ${o.options.name||"the host"}.\n\n        2. ${s} could not be found in the 'remotes' of ${o.options.name} with either 'name' or 'alias' attributes.\n        3. ${s} is not online, injected, or loaded.\n        4. ${s}  cannot be accessed on the expected.\n        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${s}.\n      `);const{remote:l}=a,u=i(l),d=await o.sharedHandler.hooks.lifecycle.afterResolve.emit(w({id:s},a,{options:o.options,origin:o,remoteInfo:u})),{remote:m,expose:h}=d;t.assert(m&&h,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${s}.`);let f=o.moduleCache.get(m.name);const p={host:o,remoteInfo:u};return f||(f=new c(p),o.moduleCache.set(m.name,f)),{module:f,moduleOptions:p,remoteMatchInfo:d}}registerRemote(e,n,r){const{host:s}=this,a=()=>{if(e.alias){const o=n.find((t=>{var o;return e.alias&&(t.name.startsWith(e.alias)||(null==(o=t.alias)?void 0:o.startsWith(e.alias)))}));t.assert(!o,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${o&&o.name} name or alias`)}"entry"in e&&o.isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=t.DEFAULT_SCOPE),e.type||(e.type=t.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:s});const i=n.find((t=>t.name===e.name));if(i){const t=[`The remote "${e.name}" is already registered.`,(null==r?void 0:r.force)?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];(null==r?void 0:r.force)&&(this.removeRemote(i),a(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s})),o.warn(t.join(" "))}else a(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s})}removeRemote(e){try{const{host:r}=this,{name:a}=e,i=r.options.remotes.findIndex((e=>e.name===a));-1!==i&&r.options.remotes.splice(i,1);const l=r.moduleCache.get(e.name);if(l){const a=l.remoteInfo,i=a.entryGlobalName;var n;if(globalThis[i])(null==(n=Object.getOwnPropertyDescriptor(globalThis,i))?void 0:n.configurable)?delete globalThis[i]:globalThis[i]=void 0;const c=s(l.remoteInfo);t.globalLoading[c]&&delete t.globalLoading[c],r.snapshotHandler.manifestCache.delete(a.entry);let u=a.buildVersion?o.composeKeyWithSeparator(a.name,a.buildVersion):a.name;const d=globalThis.__FEDERATION__.__INSTANCES__.findIndex((e=>a.buildVersion?e.options.id===u:e.name===u));if(-1!==d){const e=globalThis.__FEDERATION__.__INSTANCES__[d];u=e.options.id||u;const o=t.getGlobalShareScope();let n=!0;const r=[];Object.keys(o).forEach((e=>{const t=o[e];t&&Object.keys(t).forEach((o=>{const s=t[o];s&&Object.keys(s).forEach((t=>{const i=s[t];i&&Object.keys(i).forEach((s=>{const l=i[s];l&&"object"==typeof l&&l.from===a.name&&(l.loaded||l.loading?(l.useIn=l.useIn.filter((e=>e!==a.name)),l.useIn.length?n=!1:r.push([e,o,t,s])):r.push([e,o,t,s]))}))}))}))})),n&&(e.shareScopeMap={},delete o[u]),r.forEach((([e,t,n,r])=>{var s,a,i;null==(i=o[e])||(null==(a=i[t])||(null==(s=a[n])||delete s[r]))})),globalThis.__FEDERATION__.__INSTANCES__.splice(d,1)}const{hostGlobalSnapshot:m}=T(e,r);if(m){const o=m&&"remotesInfo"in m&&m.remotesInfo&&t.getInfoWithoutType(m.remotesInfo,e.name).key;o&&(delete m.remotesInfo[o],Boolean(t.Global.__FEDERATION__.__MANIFEST_LOADING__[o])&&delete t.Global.__FEDERATION__.__MANIFEST_LOADING__[o])}r.moduleCache.delete(e.name)}}catch(e){console.log("removeRemote fail: ",e)}}constructor(e){this.hooks=new p({beforeRegisterRemote:new h("beforeRegisterRemote"),registerRemote:new h("registerRemote"),beforeRequest:new f("beforeRequest"),onLoad:new d("onLoad"),handlePreloadModule:new u("handlePreloadModule"),errorLoadRemote:new d("errorLoadRemote"),beforePreloadRemote:new d("beforePreloadRemote"),generatePreloadAssets:new d("generatePreloadAssets"),afterPreloadRemote:new d,loadEntry:new d}),this.host=e,this.idToRemoteMap={}}}function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},A.apply(this,arguments)}class P{initOptions(e){this.registerPlugins(e.plugins);const t=this.formatOptions(this.options,e);return this.options=t,t}async loadShare(e,t){return this.sharedHandler.loadShare(e,t)}loadShareSync(e,t){return this.sharedHandler.loadShareSync(e,t)}initializeSharing(e=t.DEFAULT_SCOPE,o){return this.sharedHandler.initializeSharing(e,o)}initRawContainer(e,t,o){const n=i({name:e,entry:t}),r=new c({host:this,remoteInfo:n});return r.remoteEntryExports=o,this.moduleCache.set(e,r),r}async loadRemote(e,t){return this.remoteHandler.loadRemote(e,t)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,t,o={}){this.sharedHandler.initShareScopeMap(e,t,o)}formatOptions(e,o){const{shared:n}=t.formatShareConfigs(e,o),{userOptions:r,options:s}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:o,options:e,shareInfo:n}),a=this.remoteHandler.formatAndRegisterRemote(s,r),{shared:i}=this.sharedHandler.registerShared(s,r),l=[...s.plugins];r.plugins&&r.plugins.forEach((e=>{l.includes(e)||l.push(e)}));const c=A({},e,o,{plugins:l,remotes:a,shared:i});return this.hooks.lifecycle.init.emit({origin:this,options:c}),c}registerPlugins(e){const o=function(e,o){const n=t.getGlobalHostPlugins();return n.length>0&&n.forEach((t=>{(null==e?void 0:e.find((e=>e.name!==t.name)))&&e.push(t)})),e&&e.length>0&&e.forEach((e=>{o.forEach((t=>{t.applyPlugin(e)}))})),e}(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce(((e,t)=>t?(e&&!e.find((e=>e.name===t.name))&&e.push(t),e):e),o||[])}registerRemotes(e,t){return this.remoteHandler.registerRemotes(e,t)}constructor(e){this.hooks=new p({beforeInit:new h("beforeInit"),init:new u,beforeInitContainer:new f("beforeInitContainer"),initContainer:new f("initContainer")}),this.version="0.5.1",this.moduleCache=new Map,this.loaderHook=new p({getModuleInfo:new u,createScript:new u,createLink:new u,fetch:new d});const o={id:t.getBuilderId(),name:e.name,plugins:[{name:"snapshot-plugin",async afterResolve(e){const{remote:o,pkgNameOrAlias:n,expose:r,origin:s,remoteInfo:a}=e;if(!t.isRemoteInfoWithEntry(o)||!t.isPureRemoteEntry(o)){const{remoteSnapshot:t,globalSnapshot:i}=await s.snapshotHandler.loadRemoteSnapshotInfo(o);E(a,t);const l={remote:o,preloadConfig:{nameOrAlias:n,exposes:[r],resourceCategory:"sync",share:!1,depsRemote:!1}},c=await s.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:s,preloadOptions:l,remoteInfo:a,remote:o,remoteSnapshot:t,globalSnapshot:i});return c&&y(a,s,c,!1),b({},e,{remoteSnapshot:t})}return e}},{name:"generate-preload-assets-plugin",async generatePreloadAssets(e){const{origin:o,preloadOptions:n,remoteInfo:r,remote:s,globalSnapshot:a,remoteSnapshot:i}=e;return t.isRemoteInfoWithEntry(s)&&t.isPureRemoteEntry(s)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:s.name,url:s.entry,moduleInfo:{name:r.name,entry:s.entry,type:"global",entryGlobalName:"",shareScope:""}}]}:(E(r,i),R(o,n,r,a,i))}}],remotes:[],shared:{},inBrowser:t.isBrowserEnv()};this.name=e.name,this.options=o,this.snapshotHandler=new $(this),this.sharedHandler=new N(this),this.remoteHandler=new j(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...o.plugins,...e.plugins||[]]),this.options=this.formatOptions(o,e)}}let x=null;t.setGlobalFederationConstructor(P),e.registerGlobalPlugins=t.registerGlobalPlugins,Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return o.loadScriptNode}}),e.FederationHost=P,e.getInstance=function(){return x},e.getRemoteEntry=a,e.getRemoteInfo=i,e.init=function(e){const o=t.getGlobalFederationInstance(e.name,e.version);if(o)return o.initOptions(e),x||(x=o),o;{const o=t.getGlobalFederationConstructor()||P;return x=new o(e),t.setGlobalFederationInstance(x),x}},e.loadRemote=function(...e){return t.assert(x,"Please call init first"),x.loadRemote.apply(x,e)},e.loadShare=function(...e){return t.assert(x,"Please call init first"),x.loadShare.apply(x,e)},e.loadShareSync=function(...e){return t.assert(x,"Please call init first"),x.loadShareSync.apply(x,e)},e.preloadRemote=function(...e){return t.assert(x,"Please call init first"),x.preloadRemote.apply(x,e)},e.registerPlugins=function(...e){return t.assert(x,"Please call init first"),x.registerPlugins.apply(x,e)},e.registerRemotes=function(...e){return t.assert(x,"Please call init first"),x.registerRemotes.apply(x,e)}}(index_cjs$1);const defaultRetries=3;async function fetchWithRetry({url:e,options:t={},retryTimes:o=defaultRetries,fallbackUrl:n=""}){try{const o=await fetch(e,t),n=o.clone();if(!o.ok)throw new Error(`Server error：${o.status}`);return await n.json().catch((t=>{throw new Error(`Json parse error: ${t}, url is: ${e}`)})),o}catch(r){if(o<=0){if(console.log(`>>>>>>>>> retry failed after ${defaultRetries} times for url: ${e}, now will try fallbackUrl url: ${n} <<<<<<<<<`),n&&n!==e)return fetchWithRetry({url:n,options:t,retryTimes:1,fallbackUrl:n});throw new Error("The request failed three times and has now been abandoned")}return await new Promise((e=>setTimeout(e,1e3))),console.log("Trying again. Number of retries available："+(o-1)),await fetchWithRetry({url:e,options:t,retryTimes:o-1,fallbackUrl:n})}}const RetryPlugin=e=>({name:"retry-plugin",fetch:async(t,o)=>fetchWithRetry({url:t,options:_extends({},o,null==e?void 0:e.options),retryTimes:null==e?void 0:e.retryTimes,fallbackUrl:null==e?void 0:e.fallbackUrl})});var retryPlugin_cjs=RetryPlugin,exports,__createBinding,__exportStar;!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=index_cjs$1;function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(retryPlugin_cjs);Object.defineProperty(e,"RetryPlugin",{enumerable:!0,get:function(){return n.default}}),Object.keys(t).forEach((function(o){"default"===o||e.hasOwnProperty(o)||Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[o]}})}))}(runtime_cjs),exports=runtime,__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),__exportStar=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||__createBinding(t,e,o)},Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(runtime_cjs,exports);const getLocalManifest=()=>{const e=sessionStorage.getItem("manifest");return e?JSON.parse(e):null},fetchFrontendManifest=async()=>{const e=getLocalManifest();if(e)return console.log("[Manifest] Loaded from Local",e),e;const t=await fetch("https://mhhk7kypuf.execute-api.us-east-1.amazonaws.com/Stage/projects/3d3f2096-9078-4aa1-a68e-96143758fda8/microFrontends"),o=await t.json();return console.log("[Manifest] Loaded from Registry",o),o};(async()=>{const e=await fetchFrontendManifest(),t=Object.entries(e?.microFrontends).map((([e,t])=>({name:e.split("/")[1],entry:t[0].url})));await runtime.init({name:"shell",remotes:t});const o=Object.entries(e?.microFrontends).map((([e,t])=>{const o=e.split("/")[1];return{name:`${o}/${o}`,entry:t[0].url}}));for(const e of o){const t=await runtime.loadRemote(e.name);t?.Run&&t.Run()}})();
